!function(){function e(){function e(e){return!!w[e]}function t(t){return e(t)||(w[t]=a(t)),w[t]}function n(e){return e.filter(function(e){return!e.static})}function r(e){return e.filter(function(e){return e.static===!0})}function a(e){var t,n=[];e=e||"",e=e.replace(/\s/g," ");var r,a,i,o,c=new RegExp("["+Object.keys($).join("")+"]","g"),s=0;return t=e.replace(c,function(t,c){return a=T,i=$[t],o=!1,"\\"==t&&(c++,s++,a="",o=!0,i=new RegExp("\\"+e[c])),r={pos:c-s,pattern:i},o&&(r.static=o),n.push(r),a}),n[0]||(n[0]={pos:e.length}),{schema:n,template:t}}function i(e,t,n){e=e.split("");for(var r=0,a=e.length;a>r&&n[r];r++)n[r].static&&!n[r].pattern.test(e[r])&&(e.splice(r,0,t[n[r].pos]),a++);return e=e.join("")}function o(e,t,n,r){e=(e||"").toString(),t=t.split(""),1==r&&(e=i(e,t,n));for(var a=0,o=e.length;o>a&&n[a]&&((n[a].static||n[a].pattern)&&n[a].pattern.test(e[a]));a++)t[n[a].pos]=e[a];return t.join("")}function c(e,t,n){e=(e||"").toString();var r=[];return n.forEach(function(t,n){r[n]=e[t.pos]}),r.join("")}function s(e,n){var r=t(e);return n="undefined"!=typeof n?n.toString():" ",new Array(r.template.length+1).join(n)}function u(e,t,n){return n[e.length]&&n[e.length].static&&(e+=t[n[e.length].pos]),e}function l(e,t,n,r,a){return a&&(e=i(e,t,n),e=u(e,t,n)),o(e,s(t,r),n,!1)}function f(e,t,n,r){e=e||"";var a=e.length>n.length?n.length:e.length||1;return l(e,t,n,r).substr(0,n[a-1].pos+!!e.length)}function _(e,t,n,r,a){e=e||"",a&&(e=i(e,t,n),e=u(e,t,n));var o=l(e,t,n,r,!1);return o.substr(0,(n[e.length]||{}).pos)}function p(e,n,r){var a=t(n);return o(e,a.template,a.schema,r)}function h(e,n){var r=t(n);return c(e,r.template,r.schema)}function g(e,n,r){var a=t(n);return f(e,a.template,a.schema,r)}function m(e,n,r,a){var i=t(n);return l(e,i.template,i.schema,r,a)}function v(e,n,r,a){var i=t(n);return _(e,i.template,i.schema,r,a)}function d(e){return t(e).template}function k(e,n){return r(t(n).schema).filter(function(t){return t.pos==e}).length>0}function y(e,n){var r=t(n);return r.template[e]!==T}function b(e,r,a){a="undefined"!=typeof a?a:!1;var i=0,o=n(t(r).schema);if(e<o[0].pos)return 0;if(e>=o[o.length-1].pos)return o.length-1;for(var c=0,s=o.length;s>c;c++)if(!(e>o[c].pos)){i=c,i>0&&e<o[c].pos&&!a&&i--;break}return i}function x(e,r){var a=t(r);if(!(0>e||!r||e>a.schema.length-1))return(n(a.schema)[e]||{}).pos||r.length}function S(e,t,n){return n="undefined"==typeof n?!0:n,x(b(e,t)+(n?1:-1),t)}var w={},$=this.patterns,T=this.spacer;return{fill:p,get:t,parse:t,clear:h,clearPosition:b,dirtyPosition:x,nextPosition:S,has:e,place:g,placeFull:m,placeToTheNext:v,placer:s,template:d,isAccessoryCharByIdx:y,isStaticCharByIdx:k,notStatic:n}}function t(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(t){var r=null;t=(t||"").toString();for(var a=0;t[a]&&!e(t[a]);)a++;t=t.substr(a);var i="";a=0;for(var o=t.length;o>=a;a++)i=t.substr(0,a),n.countries.hasOwnProperty(i)&&(r=i);return{mask:n.masks[n.countries[r]]}}var n={masks:this.masks,countries:this.countries};return{search:t}}angular.module("mask.config",[]).value("mask.config",{debug:!0});{var n=angular.module("ngMask",["mask.config"]),r=void 0!==window.orientation;navigator.userAgent.toLowerCase().indexOf("android")>-1}String.prototype.splice=function(e,t,n){return this.slice(0,e)+n+this.slice(e+Math.abs(t))},angular.element.prototype.insertBefore=function(e){e[0].parentNode.insertBefore(this[0],e[0].nextSibling)},Array.prototype.getUnique=function(){for(var e={},t=[],n=0,r=this.length;r>n;++n)e.hasOwnProperty(this[n])||(t.push(this[n]),e[this[n]]=1);return t},n.directive("mask",function(e,t){return{restrict:"A",require:"^ngModel",compile:function(){return{post:function(n,a,i,o){function c(e){return e=e||"",e.replace($,"")}function s(t){console.log("mask update mask",t),y=t,b=e.get(y),d.text(b.template),u()}function u(){console.log("mask init"),x=o.$modelValue||null,x&&(S=e.placeToTheNext(x,y,w,T),h()),console.log("mask init",x,S,y)}function l(e){for(var t=0,n=b.schema.length;n>t&&e>=b.schema[t].pos||b.schema[t]&&b.schema[t].static;t++);return b.schema[t]?b.schema[t].pos:null}function f(e){for(var t=b.schema.length-1;t>0&&e<=b.schema[t].pos||b.schema[t]&&b.schema[t].static;t--);return b.schema[t]?b.schema[t].pos:b.schema[0].pos}function _(t,n){S=S.split("");for(var r=t;n>r;r++)e.isStaticCharByIdx(r,y)&&(S[r]="");S=S.join("")}function p(t,n){S=o.$viewValue,_(n,S.length),S=S.slice(0,t)+S.slice(n),x=c(S),S=e.placeToTheNext(x,y,w,T)}function h(){console.log("render value"),o.$setViewValue(S),o.$render()}function g(e){return(e.metaKey||e.ctrlKey)&&88===e.which}function m(e){return(e.metaKey||e.ctrlKey)&&86===e.which}var v=angular.element("<div></div>").addClass("mask-wrap"),d=angular.element("<div></div>").addClass("mask-text"),k=angular.element("<div></div>").addClass("mask-input");v.append(d).append(k),v.insertBefore(a),k.append(a);var y,b,x,S,w=" ",$=/\s/g,T=!0;i.$observe("mask",s),i.$observe("maskAutocomplete",function(e){T=1==e}),o.$parsers.push(function(n){if(R)n=c(n),S=e.placeToTheNext(n,y,w,T),n=S,h();else if(C){console.log("cutEvent"),n=c(n);{var r=t.range(a);l(r.begin)}S=e.placeToTheNext(n,y,w,T),n=S,h(),t.set(a[0],r.begin)}return n=e.clear(n,y),console.log("parsers",n),n}),o.$formatters.push(function(t){return console.log("mask formatters",t),e.placeToTheNext(t,y,w,T)});var R=!1,C=!1;a.bind("keydown",function(e){var n=e.which;if(console.log("keydown"),R=m(e),C=g(e),8==n||46==n||r&&127==n){var i=t.range(a),o=i.begin,c=i.end;c-o===0&&(o=46!=n?f(o):c=l(o-1),c=46==n?l(c):c),p(o,c),h();{f(o)}return t.set(a[0],o),e.preventDefault(),!0}return 27==n?(t.set(a[0],y.length),a.trigger("blur"),e.preventDefault(),!1):void 0}),a.bind("keypress",function(n){var r=n.which,i=t.range(a);if(console.log("keypress"),S=S||"",!(n.ctrlKey||n.altKey||n.metaKey||32>r))if(r){if(console.log(r,i.begin,i.end),i.end-i.begin!==0)p(i.begin,i.end);else if(o.$modelValue&&o.$modelValue.length==b.schema.length)return n.preventDefault(),void 0;var s=String.fromCharCode(r),u=l(i.begin-1);_(u,S.length);var f=e.clearPosition(u,y),g=e.notStatic(b.schema);if(!g[f]||!g[f].pattern||!g[f].pattern.test(s))return n.preventDefault(),void 0;if(null!==u){S=S.splice(u,0,s),S=e.placeToTheNext(c(S),y,w,T),h();var m=l(u);m&&t.set(a[0],m),n.preventDefault()}}else;})}}}}}),n.directive("phoneMask",function(e){return{restrict:"A",require:"^ngModel",scope:{phoneOptions:"="},link:function(t,n,r,a){function i(){return a.$modelValue||a.$viewValue||""}function o(){c=i(),t.phoneOptions=e.search(c)}var c;o(),a.$formatters.push(function(){o()}),a.$viewChangeListeners.unshift(function(){o()})}}}),n.filter("cleared",function(e){return function(t,n){return e.clear(t,n)}}),n.filter("masked",function(e){return function(t,n){return e.fill(t,n,!0)}}),n.filter("placed",function(e){return function(t,n,r){return e.place(t,n,r)}}),n.filter("template",function(e){return function(t){return e.template(t)}}),n.provider("$mask",function(){return{patterns:{"#":/\d/,"*":/\w/,"\\\\":null},spacer:"_",$get:e}}),n.service("$maskCaret",function(){function e(e){if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}}function t(e,t){if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else e.focus(),void 0!==e.selectionStart&&e.setSelectionRange(t,t)}function n(e,t,n){if(e=angular.element(e),0!==e.length){if("number"==typeof t)return n="number"==typeof n?n:t,e.each(function(){if(this.setSelectionRange)this.setSelectionRange(t,n);else if(this.createTextRange){var e=this.createTextRange();e.collapse(!0),e.moveEnd("character",n),e.moveStart("character",t),e.select()}});if(e[0].setSelectionRange)t=e[0].selectionStart,n=e[0].selectionEnd;else if(document.selection&&document.selection.createRange){var r=document.selection.createRange();t=0-r.duplicate().moveStart("character",-1e5),n=t+r.text.length}return{begin:t,end:n}}}return{get:e,set:t,range:n}}),n.provider("$maskPhone",function(){var e={"":"3_2_7",1:"1_3_7",2:"3_3_6",20:"1_2_8",27:"2_3_7",3:"3_2_7",30:"2_3_7",31:"2_3_7",32:"2_3_7",33:"2_2_8",34:"2_3_7",36:"2_3_7",39:"2_3_7",4:"3_2_7",40:"2_3_7",41:"2_3_7",43:"2_3_7",44:"2_3_7",45:"2_3_7",46:"2_3_7",47:"2_3_7",48:"2_3_7",49:"2_3_7",51:"2_3_7",52:"2_3_7",53:"2_3_7",54:"2_3_7",55:"2_3_7",56:"2_3_7",57:"2_3_7",58:"2_3_7",60:"2_3_7",61:"2_3_7",62:"2_3_7",63:"2_3_7",64:"2_3_7",65:"2_3_7",66:"2_3_7",7:"1_3_7",81:"2_3_7",82:"2_3_7",86:"2_3_7",9:"3_2_7",90:"2_3_7",91:"2_3_7",92:"2_3_7",93:"2_3_7",94:"2_3_7",98:"2_3_7",99:"3_2_7",992:"3_2_7",993:"3_2_7",994:"3_2_7",995:"3_2_7",996:"3_2_7",998:"3_2_7"};return{masks:{"1_3_7":"# (###) ###-####","3_2_7":"### (##) ###-####","2_3_7":"## (###) ###-####","1_2_8":"# (##) ########","3_3_6":"### (###) ######","2_1_8":"## (#) ####-####","2_2_8":"## (##) ####-####"},countries:e,$get:t}})}();